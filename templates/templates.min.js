function tmpl(s,c){var S=String.prototype,M=[],i=0,r;for(s=s[r="replace"](/\{#if *(.*?) *}/g,function(p,a){return M[i]=a,"{#"+i++ +"#}"}),i=M.length;i--;)s=s[r](RegExp("{#"+i+"#}([\\s\\S]*?){#\\/if}","g"),"{#"+i+"#}$1{#/"+i+"#}");return S.O=function(c,s,x){return this[r](x=/{(?: *)(\w+)(?: *)}([\s\S]*?){\/(?: *)\1(?: *)}/g,function(p,a,b){if(s="",c[a])for(i in c[a])s+=b.T("c['"+a+"']["+i+"]",c),s=s.I("c."+a+"["+i+"].",c),s.match(x)&&(s=s.O(c[a][i]));return s})},S.I=function(V,c,m,v,e){return this[r](/{#(\d)#}([\s\S]*){#\/\1#}/g,function(p,a,b,f){a=M[+a],m=a.match(/(^!|^not) */),v=V,m&&(a=a.replace(m[0],""),v="!"+v);try{f=eval(v+a)}catch(e){f=0}return b.match(e=/{#else}[\s\S]*/)?b[r](f?e:/[\s\S]*\{#else}/,""):f?b:""})},S.T=function(V,c,t){return this[r](/{+ *([A-Za-z0-9_.]+)}+/g,function(p,$1,f){try{f=eval(!V.big||$1.match(t=/\./g)?V+"['"+$1.replace(t,"']['")+"']":V)}catch(e){}return f=f?f.big?f:"string"!=typeof f[$1]?p:f[$1]:"","{"==p[1]?new Option(f).innerHTML:f})},s.O(c,1).T("c",c).I("c.",c)}