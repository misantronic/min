<pre id="p" style="line-height: 150%; font-size: 20px;"></pre>
<script>
	var pos = 0, 
		br = 15, 
		chars = 255,
		walls = [ 
			5, 20, 35, 50, 65,
			70, 85, 100, 115, 130, 145, 160, 175,
			91, 106, 121, 136, 151, 166,
			125, 140, 155, 170,
			254, 239, 224, 209, 194
		];
	
	function draw() {
		var s = "";
		var i = 0;		

		while(i<chars) {
			// break
			if(i % br == 0) s += '<br>';
			
			// place walls
			var wallSet = false;
			walls.forEach(function(wall) {
				if(wall == i) {
					s += "&nbsp;█&nbsp;";
					wallSet = true;
				}
			});
 			
 			// set player or floor
 			if(i == pos) 
 				s += " ✖ ";
			else if(! wallSet) 
				s += "&nbsp;&nbsp;&nbsp;";
			
			i++;
		}
		p.innerHTML = s;
	}

	onkeyup = move = function(e) {
		var newPos = 0;
		
		// get direction
		if(e.keyCode == 39) { // right
			newPos = pos + 1; 
		}

		if(e.keyCode == 37) { // left
			newPos = pos - 1; 
		}
		
		if(e.keyCode == 40) { // down
			newPos = pos + br; 
		}

		if(e.keyCode == 38) { // up
			newPos = pos - br; 
		}

		console.log("move: from ", pos, " to ", newPos);
		// detect collision
		if(! collision(newPos) && newPos) {
			pos = newPos;
			draw();
		}
	};

	collision = function(field) {
		for(var i=0; i < walls.length; i++) {
			if(walls[i] == field) return true;
		}
		return false;
	};

	draw();

</script>